<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= title %> | Beasiswa Sigma</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="/node_modules/@fortawesome/fontawesome-free/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/all.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
  </head>
  <body class="bg-gradient-to-b from-sky-500/85 via-sky-600/80  to-sky-900/85 min-h-screen">
  <div class="flex min-h-screen">
    <!-- Mobile Backdrop (only visible on mobile devices) -->
    <div
            id="mobileBackdrop"
            class="fixed inset-0 bg-black/50 z-10 md:hidden hidden"
    ></div>

    <!-- Sidebar -->
    <%- include('./components/dashboard/_sidebar.ejs') %>

    <!-- Main Content -->
    <main class="flex-1 md:ml-60 bg-gradient-to-b from-white/90 to-white/5 min-h-screen">
      <!-- Top Bar -->
      <%- include('./components/dashboard/_header.ejs') %>

      <!-- Page Content -->
      <div class="container mx-auto px-4 py-6">
        <%- body %>
        <!-- Render the content variable directly here -->
      </div>
    </main>
  </div>
  </body>

    <script>
      // Toggle Sidebar Mobile
      const sidebar = document.querySelector("aside");
      const menuToggle = document.getElementById("menuToggle");
      const mobileBackdrop = document.getElementById("mobileBackdrop");

      const toggleSidebar = () => {
        sidebar.classList.toggle("-translate-x-full");
        mobileBackdrop.classList.toggle("hidden");
      };

      menuToggle?.addEventListener("click", toggleSidebar);
      mobileBackdrop?.addEventListener("click", toggleSidebar);

      // Beasiswa Dropdown Toggle (only when clicking chevron)
      const chevronToggle = document.getElementById("chevronToggle");
      const beasiswaDropdown = document.getElementById("beasiswaDropdown");
      const chevronIcon = document.getElementById("chevronIcon");

      chevronToggle?.addEventListener("click", (e) => {
        e.preventDefault(); // prevent link behavior
        beasiswaDropdown?.classList.toggle("hidden");
        chevronIcon?.classList.toggle("rotate-180");
      });

      // Close dropdown on mobile when resizing
      window.addEventListener("resize", () => {
        if (window.innerWidth >= 768) {
          sidebar.classList.remove("-translate-x-full");
          mobileBackdrop.classList.add("hidden");
        } else {
          beasiswaDropdown?.classList.add("hidden");
          chevronIcon?.classList.remove("rotate-180");
        }
      });
    </script>
  </body>
</html>
